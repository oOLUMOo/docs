# Configure for a Network Load Balancer

Tại trang [Integrate with Network Load Balancer](https://docs-admin.vngcloud.vn/display/VKSVI/Integrate+with+Network+Load+Balancer), chúng tôi đã hướng dẫn bạn cách thực hiện cài đặt VNGCloud Controller Manager, tạo và apply yaml file. Sau đây là chi tiết các ý nghĩa các thông tin bạn có thể thiết lập trong yaml file:

### Annotation <a href="#configureforanetworkloadbalancer-annotation" id="configureforanetworkloadbalancer-annotation"></a>

Sử dụng các annotation dưới đây để tuỳ chỉnh Load Balancer phù hợp với nhu cầu của bạn:

| **Annotation**                                                                                    | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | **Mặc định/ Example**                                                                                 |
| ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------- |
| [vks.vngcloud.vn/load-balancer-id](http://vks.vngcloud.vn/load-balancer-id)                       | <ul><li>Load Balancer ID của bạn được sử dụng cho service. Nếu giá trị này không được chỉ định thì chúng tôi sẽ tự động tạo một Network Load Balancer mới.</li></ul>                                                                                                                                                                                                                                                                                                                 | <ul><li>Mặc định là trống.</li></ul><ul><li>Ví dụ: lb-67cd0bbc-4c27-xxxx-xxxx-9f416a509577.</li></ul> |
| [vks.vngcloud.vn/internal-load-balancer](http://vks.vngcloud.vn/internal-load-balancer)           | <ul><li>Chỉ định xem load balancer là internal hay external. Thông tin này sẽ được bỏ qua nếu bạn đã cung cấp một <a href="http://vks.vngcloud.vn/load-balancer-id">vks.vngcloud.vn/load-balancer-id</a></li></ul>                                                                                                                                                                                                                                                                   | <ul><li>Mặc định: false.</li></ul>                                                                    |
| [vks.vngcloud.vn/load-balancer-name](http://vks.vngcloud.vn/load-balancer-name)                   | <ul><li>Chỉ định tên của load balancer. Nếu annotation này bị bỏ qua, tên của NLB  sẽ được tạo tự động ở định dạng: vks-&#x3C;piece-of-cluster-uuid>-&#x3C;service-namespace>-&#x3C;service-name>. Nếu tên NLB cụ thể được cung cấp, nó sẽ được định dạng là: vks-&#x3C;piece-of-cluster-uuid>-&#x3C;your-loadbalancer-name>. Trường này bị bỏ qua khi annotation <a href="http://vks.vngcloud.vn/load-balancer-id">vks.vngcloud.vn/load-balancer-id</a> đã được cung cấp.</li></ul> | <ul><li>Mặc định là trống.</li><li>Ví dụ: my-new-loadbalancer.</li></ul>                              |
| [vks.vngcloud.vn/package-id](http://vks.vngcloud.vn/package-id)                                   | <ul><li>Package ID của NLB. Nếu trường này không được chỉ định, gói mặc định sẽ được sử dụng. Trường này bị bỏ qua khi trường <a href="http://vks.vngcloud.vn/load-balancer-id">vks.vngcloud.vn/load-balancer-id</a> được cung cấp.</li></ul>                                                                                                                                                                                                                                        | <ul><li>Mặc định: lbp-96b6b072-aadb-4b58-9d5f-c16ad69d36aa (NLB_Small).</li></ul>                     |
| [vks.vngcloud.vn/enable-secgroup-default](http://vks.vngcloud.vn/enable-secgroup-default)         | <ul><li>Chỉ định xem có đính kèm Security Group mặc định với các member của NLB này hay không.</li></ul>                                                                                                                                                                                                                                                                                                                                                                             | <ul><li>Mặc định: false.</li></ul>                                                                    |
| [vks.vngcloud.vn/idle-timeout-client](http://vks.vngcloud.vn/idle-timeout-client)                 | <ul><li>Thời gian chờ kết nối timeout là thời gian tối đa mà kết nối có thể duy trì mở mà không cần truyền dữ liệu, sau thời gian đó NLB sẽ đóng kết nối. Phạm vi: 1⇒36001⇒3600.</li></ul>                                                                                                                                                                                                                                                                                           | <ul><li>Mặc định: 50.</li></ul>                                                                       |
| [vks.vngcloud.vn/idle-timeout-member](http://vks.vngcloud.vn/idle-timeout-member)                 | <ul><li>Thời gian chờ timeout của backend member tính bằng giây. Phạm vi: 1⇒36001⇒3600.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                    | <ul><li>Mặc định: 50.</li></ul>                                                                       |
| [vks.vngcloud.vn/idle-timeout-connection](http://vks.vngcloud.vn/idle-timeout-connection)         | <ul><li>Thời gian chờ kết nối cho backend member tính bằng giây.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                           | <ul><li>Mặc định: 5.</li></ul>                                                                        |
| [vks.vngcloud.vn/listener-allowed-cidrs](http://vks.vngcloud.vn/listener-allowed-cidrs)           | <ul><li>Danh sách kiểm soát truy cập (ACL) để giới hạn lưu lượng truy cập đến listener trong một tập hợp địa chỉ IP nguồn được phép (CIDR).</li></ul>                                                                                                                                                                                                                                                                                                                                | <ul><li>Mặc định: 0.0.0.0/0.</li><li>Ví dụ: 172.16.0.0/24</li></ul>                                   |
| [vks.vngcloud.vn/pool-algorithm](http://vks.vngcloud.vn/pool-algorithm)                           | <ul><li>Thuật toán LB được sử dụng: round-robin, least-connections, và source-ip.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                          | <ul><li>Mặc định: round-robin.</li></ul>                                                              |
| [vks.vngcloud.vn/monitor-healthy-threshold](http://vks.vngcloud.vn/monitor-healthy-threshold)     | <ul><li>Số lần kiểm tra tình trạng thành công mà một member trong pool phải vượt qua trước khi được coi là healthy pool</li></ul>                                                                                                                                                                                                                                                                                                                                                    | <ul><li>Mặc định: 3.</li></ul>                                                                        |
| [vks.vngcloud.vn/monitor-unhealthy-threshold](http://vks.vngcloud.vn/monitor-unhealthy-threshold) | <ul><li>Số lần kiểm tra healthy không thành công liên tiếp trước đó được coi là unhealthy pool.</li></ul>                                                                                                                                                                                                                                                                                                                                                                            | <ul><li>Mặc định: 3.</li></ul>                                                                        |
| [vks.vngcloud.vn/monitor-timeout](http://vks.vngcloud.vn/monitor-timeout)                         | <ul><li>Thời gian tối đa sẽ chờ phản hồi từ pool member trước khi coi đó là lần kiểm tra healthy không thành công.</li></ul>                                                                                                                                                                                                                                                                                                                                                         | <ul><li>Mặc định: 5.</li></ul>                                                                        |
| [vks.vngcloud.vn/monitor-interval](http://vks.vngcloud.vn/monitor-interval)                       | <ul><li>Khoảng thời gian giữa các lần kiểm tra tình trạng liên tiếp được thực hiện bởi pool riêng lẻ tính bằng giây.</li></ul>                                                                                                                                                                                                                                                                                                                                                       | <ul><li>Mặc định: 30.</li></ul>                                                                       |
| [vks.vngcloud.vn/monitor-protocol](http://vks.vngcloud.vn/monitor-protocol)                       | <ul><li>The type of health monitor. Possible values: tcp, ping-udp, http, and https.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                       | <ul><li>Mặc định: tcp.</li></ul>                                                                      |
| [vks.vngcloud.vn/monitor-http-method](http://vks.vngcloud.vn/monitor-http-method)                 | <ul><li>Xác định phương thức HTTP được sử dụng để gửi yêu cầu kiểm tra tình trạng đến backend servers. Tùy chọn này chỉ áp dụng khi <a href="http://vks.vngcloud.vn/monitor-protocol">vks.vngcloud.vn/monitor-protocol</a> được đặt thành http hoặc https. Các giá trị được chấp nhận bao gồm get, post và put.</li></ul>                                                                                                                                                            | <ul><li>Mặc định: get.</li></ul>                                                                      |
| [vks.vngcloud.vn/monitor-http-path](http://vks.vngcloud.vn/monitor-http-path)                     | <ul><li>Sử dụng đường dẫn mặc định / để ping thư mục gốc hoặc chỉ định đường dẫn tùy chỉnh nếu muốn. Tùy chọn này chỉ áp dụng khi <a href="http://vks.vngcloud.vn/monitor-protocol">vks.vngcloud.vn/monitor-protocol</a> được đặt thành http hoặc https.</li></ul>                                                                                                                                                                                                                   | <ul><li>Mặc định: /.</li></ul>                                                                        |
| [vks.vngcloud.vn/monitor-http-success-code](http://vks.vngcloud.vn/monitor-http-success-code)     | <ul><li>Xác định HTTP status code cho biết kiểm tra tình trạng thành công. Tùy chọn này chỉ áp dụng khi <a href="http://vks.vngcloud.vn/monitor-protocol">vks.vngcloud.vn/monitor-protocol</a> được đặt thành http hoặc https.</li></ul>                                                                                                                                                                                                                                             | <ul><li>Mặc định: 200.</li></ul>                                                                      |
| [vks.vngcloud.vn/monitor-http-version](http://vks.vngcloud.vn/monitor-http-version)               | <ul><li>Xác định phiên bản HTTP được sử dụng để gửi yêu cầu kiểm tra tình trạng đến backend servers. Tùy chọn này chỉ áp dụng khi <a href="http://vks.vngcloud.vn/monitor-protocol">vks.vngcloud.vn/monitor-protocol</a> được đặt thành http hoặc https. Các giá trị được chấp nhận bao gồm 1.0 và 1.1.</li></ul>                                                                                                                                                                    | <ul><li>Mặc định: 1.0.</li></ul>                                                                      |
| [vks.vngcloud.vn/monitor-http-domain-name](http://vks.vngcloud.vn/monitor-http-domain-name)       | <ul><li>Tên miền được đưa vào HTTP Host Header tới backend server để kiểm tra tình trạng HTTP. Tùy chọn này chỉ áp dụng khi <a href="http://vks.vngcloud.vn/monitor-protocol">vks.vngcloud.vn/monitor-protocol</a> được đặt thành http hoặc https và trường <a href="http://vks.vngcloud.vn/monitor-http-version">vks.vngcloud.vn/monitor-http-version</a> là 1.1.</li></ul>                                                                                                         | <ul><li>Mặc định: <a href="http://nip.io/">nip.io</a>.</li></ul>                                      |
